!function(a,b,c,d,e){a.GuessWhere=a.GuessWhere||e(a,b,c,d),c(b).ready(GuessWhere.init)}(this,document,jQuery,google,function(a,b,c,d){"use strict";function e(b,e,f,g){var h=q.map=new d.maps.Map(q.canvas,{center:new d.maps.LatLng(b||45.436,e||4.876),zoom:f||2,backgroundColor:"#f1f1f1",disableDefaultUI:!0,disableDoubleClickZoom:!0,keyboardShortcuts:!1,scrollwheel:!1,draggable:!1,styles:[{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.station",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{visibility:"simplified"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#5fbcec"}]},{featureType:"road",stylers:[{lightness:10},{saturation:-40}]},{featureType:"landscape",stylers:[{color:"#f2f2f2"},{visibility:"on"}]}]});d.maps.event.addListenerOnce(h,"tilesloaded",function(){return!(!g||"function"!=typeof g)&&g.call(this,h)}),c(a).on("resize",function(a){d.maps.event.trigger(q.map,"resize")})}function f(a,b,d,e){return c.ajax({url:a,type:"GET",dataType:"JSON",data:b,success:d,error:e})}function g(){q.canvas=c("#mapCanvas").get(0),q.geocoder=new d.maps.Geocoder,e(45.436,4.876,2,function(a){f("./assets/js/countries.json",{},i,function(a,b){})}),c(".fa-info-circle").on("click",function(a){alert("By continue to use this website, you agree to use of cookies.")})}function h(a,b){a.push({name:b.name.common,latlng:new d.maps.LatLng(b.latlng[0],b.latlng[1]),capital:b.capital})}function i(a){var b={total:a.length,countries:[],capitals:[],byRegion:{},bySubregion:{}};return c.map(a,function(a){a.capital&&""!==a.capital&&(b.capitals.push(a.capital),h(b.countries,a),b.byRegion[a.region]=b.byRegion[a.region]||[],h(b.byRegion[a.region],a),b.bySubregion[a.subregion]=b.bySubregion[a.subregion]||[],h(b.bySubregion[a.subregion],a))}),q.data=b,j(),m()}function j(){var a=c(".regions"),b=c(".toggle-regions");for(var d in q.data.byRegion)""!=d&&c("<li />").append(c("<label />",{html:" "+d}).prepend(c("<input />",{type:"radio",name:"region",value:d.toLowerCase(),id:"region"+d.replace(" ",""),"data-title":d}).on("click",k))).appendTo(a);b.on("click",function(c){c.preventDefault(),a.toggleClass("regions--open"),b.find(".fa").toggleClass("fa-plus fa-minus")}),c("#regionWorld").click(k)}function k(a){this.checked&&(q.quiz.region=c(this).data("title"))}function l(a,b){a.push(c("<button />",{class:"btn the-guess btn-info animated",type:"button",html:b.capital+"<br /><small>"+b.name+"</small>"}))}function m(){q.quiz=q.quiz||{},q.quiz.done=q.quiz.done||[],q.quiz.correct=q.quiz.correct||0,q.quiz.answer=q.quiz.answer||"",q.quiz.region=q.quiz.region||"World";var a=o();if(void 0===a||!a.capital||""===a.capital)return m();q.geocoder.geocode({address:a.capital},function(b,e){if(e===d.maps.GeocoderStatus.OK){var f=b[0];q.map.panTo(f.geometry.location),q.map.setZoom(r.iOS||r.android?10:12),r.iOS||r.android?q.map.panBy(0,-100):q.map.panBy(-100,0);var g=c(".guesses").empty(),h=[];l(h,a),q.quiz.answer=a.capital+a.name,q.quiz.done.push(a);for(var i=0;i<3;i++){var j=o();void 0!==j&&j.capital?l(h,j):i--}h=p(h),c(h).each(function(a,b){c(b).delay(100*a).promise().done(function(){c(this).appendTo(g).addClass("fadeInLeft").on("click",n)})}),c(".score-out-of").html(q.quiz.done.length)}})}function n(b){b.preventDefault();var d=c(this).prop("disabled",!0),e=d.html();d.text()===q.quiz.answer?(q.quiz.correct+=1,d.toggleClass("btn-info btn-success").html('<i class="fa fa-check"></i> '+e)):(d.toggleClass("btn-info btn-danger").html('<i class="fa fa-remove"></i> '+e),d.siblings(".the-guess").each(function(a,b){var d=c(b),e=d.text(),f=d.html();e===q.quiz.answer&&d.toggleClass("btn-info btn-success").html('<i class="fa fa-check"></i> '+f)})),d.siblings().prop("disabled",!0),c(".scored").html(q.quiz.correct),c(".score-out-of").html(q.quiz.done.length),a.setTimeout(function(){c(".animated").each(function(a,b){c(b).addClass("fadeOutRight")}),m()},1500)}function o(){var a="World"===q.quiz.region?q.data.countries[Math.floor(Math.random()*q.data.countries.length)]:q.data.byRegion[q.quiz.region][Math.floor(Math.random()*q.data.byRegion[q.quiz.region].length)];if(q.quiz&&q.quiz.done&&-1===q.quiz.done.indexOf(a))return a;o()}function p(a){for(var b,c,d=a.length;d>0;)c=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[c],a[c]=b;return a}var q={},r={fbscopes:"email",iOS:new RegExp(/iP(od|ad|hone)/).test(navigator.userAgent),android:new RegExp(/(Android)/).test(navigator.userAgent)};return r.init=g,r});